/* Drawer - ODL Compliant CSS */

/* Base drawer styles */
.drawer {
  position: fixed;
  background-color: var(--odl-white);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  z-index: var(--odl-z-index-overlay);
  display: flex;
  flex-direction: column;
  font-family: var(--odl-font-family-sans);
}

/* Overlay styles */
.drawer--overlay {
  z-index: 1020; /* Modal z-index */
}

.drawer--no-overlay {
  z-index: 1010; /* Overlay z-index */
}

/* Position variants */
.drawer--top {
  top: 0;
  left: 0;
  right: 0;
  position: fixed;
  border-radius: 0;
  border-bottom: var(--odl-border-width-thin) solid var(--odl-border);
  animation: drawerSlideDown 300ms ease-out forwards;
}

.drawer--right {
  top: 0;
  right: 0;
  bottom: 0;
  position: fixed;
  border-radius: 0;
  border-left: var(--odl-border-width-thin) solid var(--odl-border);
  animation: drawerSlideLeft 300ms ease-out forwards;
}

.drawer--bottom {
  bottom: 0;
  left: 0;
  right: 0;
  position: fixed;
  border-radius: 0;
  border-top: var(--odl-border-width-thin) solid var(--odl-border);
  animation: drawerSlideUp 300ms ease-out forwards;
}

.drawer--left {
  top: 0;
  left: 0;
  bottom: 0;
  position: fixed;
  border-radius: 0;
  border-right: var(--odl-border-width-thin) solid var(--odl-border);
  animation: drawerSlideRight 300ms ease-out forwards;
}

/* Size variants */
.drawer--small {
  --drawer-padding: var(--odl-spacing-3);
}

.drawer--medium {
  --drawer-padding: var(--odl-spacing-4);
}

.drawer--large {
  --drawer-padding: var(--odl-spacing-6);
}

.drawer--extra-large {
  --drawer-padding: var(--odl-spacing-8);
}

/* State modifiers */
.drawer--disabled {
  opacity: var(--odl-opacity-disabled);
  pointer-events: none;
}

.drawer--error {
  border: var(--odl-border-width-base) solid var(--odl-error);
  box-shadow: 0 0 0 1px var(--odl-error);
}

/* Backdrop overlay */
.drawer__backdrop {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  background-color: rgba(0, 0, 0, 0.4) !important;
  z-index: 1019 !important; /* Just below modal z-index of 1020 */
  animation: drawerFadeIn var(--odl-transition-normal) ease;
  pointer-events: auto;
}

/* Header section */
.drawer__header {
  padding: var(--drawer-padding, var(--odl-spacing-4));
  border-bottom: var(--odl-border-width-thin) solid var(--odl-border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--odl-spacing-4);
  flex-shrink: 0;
  background-color: transparent;
  min-height: 48px; /* Ensure consistent header height */
}

.drawer__title {
  font-size: var(--odl-font-size-xl);
  font-weight: var(--odl-font-weight-semibold);
  color: var(--odl-text-primary);
  margin: 0;
  line-height: var(--odl-line-height-tight);
}

.drawer__close-button {
  background: transparent;
  border: none;
  padding: var(--odl-spacing-2);
  cursor: pointer;
  color: var(--odl-text-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--odl-border-radius-base);
  transition: var(--odl-transition-color);
  width: 44px;
  height: 44px;
  min-width: 44px;
  min-height: 44px;
}

.drawer__close-button:hover {
  color: var(--odl-text-primary);
  background-color: var(--odl-surface-hover);
}

.drawer__close-button:focus {
  outline: var(--odl-focus-border-width) solid var(--odl-focus-border-color);
  outline-offset: var(--odl-focus-outline-offset);
}

.drawer__close-button:active {
  background-color: var(--odl-surface);
}

/* Close button is now properly contained in header */

/* Content section */
.drawer__content {
  flex: 1;
  padding: var(--drawer-padding, var(--odl-spacing-6));
  overflow-y: auto;
  font-size: var(--odl-font-size-base);
  color: var(--odl-text-primary);
  line-height: var(--odl-line-height-normal);
}

.drawer__content--no-title {
  padding: var(--drawer-padding, var(--odl-spacing-4));
}

.drawer__error-message {
  color: var(--odl-error);
  margin-bottom: var(--odl-spacing-3);
  font-size: var(--odl-font-size-sm);
}

/* Footer section */
.drawer__footer {
  padding: var(--drawer-padding, var(--odl-spacing-6));
  border-top: var(--odl-border-width-thin) solid var(--odl-border);
  background-color: var(--odl-surface);
  flex-shrink: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--odl-spacing-3);
}

/* Animations */
@keyframes drawerFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes drawerSlideDown {
  from {
    transform: translateY(-100%);
    opacity: 0;
    box-shadow: none;
  }
  to {
    transform: translateY(0);
    opacity: 1;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
}

@keyframes drawerSlideUp {
  from {
    transform: translateY(100%);
    opacity: 0;
    box-shadow: none;
  }
  to {
    transform: translateY(0);
    opacity: 1;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
}

@keyframes drawerSlideRight {
  from {
    transform: translateX(-100%);
    opacity: 0;
    box-shadow: none;
  }
  to {
    transform: translateX(0);
    opacity: 1;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
}

@keyframes drawerSlideLeft {
  from {
    transform: translateX(100%);
    opacity: 0;
    box-shadow: none;
  }
  to {
    transform: translateX(0);
    opacity: 1;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
}

/* Responsive design */
@media (max-width: 768px) {
  .drawer--right,
  .drawer--left {
    width: 90vw !important;
    max-width: 400px;
  }
  
  .drawer--top,
  .drawer--bottom {
    height: 70vh !important;
    max-height: 500px;
  }
  
  .drawer__header,
  .drawer__content,
  .drawer__footer {
    padding: var(--odl-spacing-4);
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .drawer {
    border-width: var(--odl-border-width-base);
  }
  
  .drawer__close-button:focus {
    outline-width: 3px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .drawer--top,
  .drawer--right,
  .drawer--bottom,
  .drawer--left,
  .drawer__backdrop {
    animation: none;
  }
  
  .drawer__close-button {
    transition: none;
  }
}